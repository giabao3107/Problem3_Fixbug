# Realtime Alert System Configuration

# FiinQuant Data Source Settings
data_source:
  provider: "fiinquant"
  timeframes: ["1m", "5m", "15m", "30m", "1h", "1d"]
  default_timeframe: "15m"
  retry_attempts: 3
  retry_delay: 5  # seconds
  cache_duration: 300  # seconds

# Trading Strategy Configuration
strategy:
  name: "RSI_PSAR_Engulfing"
  
  # RSI Settings
  rsi:
    period: 14
    overbought: 70
    oversold: 30
    neutral: 50
    
  # PSAR Settings  
  psar:
    af_init: 0.02
    af_step: 0.02
    af_max: 0.20
    
  # Engulfing Pattern Settings
  engulfing:
    detection_window: 2
    min_body_ratio: 0.5
    lookback_candles: 3
    
  # Volume Analysis
  volume:
    avg_period: 20
    anomaly_threshold: 1.0  # Volume > AvgVolume * threshold
    
# Risk Management
risk_management:
  take_profit: 0.15      # 15%
  stop_loss: 0.08        # 8%  
  trailing_take_profit: 0.09  # 9%
  trailing_stop: 0.03    # 3%
  position_size: 0.02    # 2% of portfolio per trade
  max_positions: 10
  max_daily_loss: 0.05   # 5% of portfolio per day
  
# Alert Settings
alerts:
  telegram:
    enabled: true
    debounce_minutes: 5  # Minimum time between same alerts
    max_alerts_per_hour: 20
    
  email:
    enabled: true
    smtp_server: "smtp.gmail.com"
    smtp_port: 587
    sender_email: ""  # Set in .env file
    sender_password: ""  # Set in .env file
    recipient_emails: []  # Set in .env file
    debounce_minutes: 15  # Minimum time between same email alerts
    max_emails_per_hour: 10
    send_daily_summary: true
    daily_summary_time: "17:00"  # Send daily summary at 5 PM
    
  # Alert Types
  types:
    buy_signal: true
    sell_signal: true  
    risk_warning: true
    volume_anomaly: true
    daily_summary: true
    portfolio_update: true
    
# Market Settings
market:
  exchanges: ["HOSE", "HNX", "UPCOM"]
  trading_hours:
    start: "09:00"
    end: "15:00"
    timezone: "Asia/Ho_Chi_Minh"
  
  # Market filters
  filters:
    min_price: 1000      # VND
    max_price: 1000000   # VND
    min_volume: 10000    # shares
    min_market_cap: 100  # billion VND (optional)
    
# Dashboard Settings
dashboard:
  refresh_interval: 10   # seconds
  max_displayed_signals: 100
  chart_timeframe: "15m"
  
# Logging Configuration
logging:
  level: "INFO"
  format: "%(asctime)s - %(name)s - %(levelname)s - %(message)s"
  max_file_size: "10MB"
  backup_count: 5
  
  # Log files
  files:
    main: "log/main.log"
    signals: "log/signals.log"
    errors: "log/errors.log"
    
# Caching Configuration
cache:
  # Redis settings (optional, falls back to memory cache)
  redis_host: "localhost"
  redis_port: 6379
  redis_db: 0
  redis_password: null  # Set in .env file if needed
  use_redis: true
  
  # Memory cache settings
  memory_cache_size: 1000  # Maximum items in memory
  default_ttl: 300  # Default time-to-live in seconds
  
  # Cache strategies for different data types
  strategies:
    market_data: 60      # Market data cache TTL (seconds)
    strategy_results: 300 # Strategy calculation cache TTL
    historical_data: 3600 # Historical data cache TTL (1 hour)
    configuration: 1800   # Config cache TTL (30 minutes)
    session_data: 600     # Session/auth cache TTL (10 minutes)

# Performance Monitoring
monitoring:
  latency_threshold: 5   # seconds
  memory_threshold: 512  # MB
  alert_on_high_latency: true
  cache_hit_ratio_threshold: 0.8  # Alert if cache hit ratio drops below 80%
